## Datasets

Datasets are generated by `scripts/generate_problems.py` and are parameterized by a small set of CLI flags.

All commands below assume your working directory is the `_refactor/` project root. If you are running from the repo root, use `_refactor/scripts/generate_problems.py` instead.

### Dataset parameters (what they mean)
- **`--seed`**: makes generation deterministic.
- **`--vars`**: number of variables (\(n\)). Legacy defaults start at **3** because `n=1–2` tends to produce toy/repetitive CNFs.
- **`--clens`**: max clause length (\(k\)). Legacy defaults are `[3,4]` (2-SAT is usually too easy; 5-SAT is supported but can be much heavier).
- **`--horn`**: `only` / `no` / `mixed`.
- **`--percase`**: problems per \((n,k,horn)\) case (must be even; the generator attempts a SAT/UNSAT balance).
- **Clause/variable ratio**: chosen from `goodratios` unless overridden (see `docs/problem-generation.md` for details and probe workflow).

### Example: full validation dataset (vars 3–50, clause length 3–5)
```
python scripts/generate_problems.py \
  --mode pysat_kissat \
  --seed 12345 \
  --vars 3-50 \
  --clens 3-5 \
  --horn mixed \
  --percase 50 \
  --dataset validation \
  --name full_vars3-50_len3-5_hornmixed_per50_seed12345 \
  --max-attempts 200000 \
  --progress-every 2000 \
  --print-sha256
```

This produces a single JSONL file under `datasets/validation/` with **14400** problem rows (plus a header line).

### Runtime controls (generation behavior)
- **`--progress-every N`**: prints periodic progress lines (to stderr) so you can see whether generation is making progress. If `N` is large, you may see no intermediate output even though the run is healthy.
- **`--max-attempts N`**: aborts if balancing a single \((n,k,horn)\) case takes more than `N` sampling attempts (default `0` = no limit). This prevents indefinite runs when SAT/UNSAT is too imbalanced under the chosen ratio.

### Will document next
- dataset naming convention (vars, lens, per-case, seed, horn/mixed)
- validation vs production sets
- metadata: how to record generation command + git SHA + checksum
- storage policy (what gets committed vs generated)
